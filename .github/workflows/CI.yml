name: "CI Run"
on:
  push:
    paths:
      - ".github/workflows/CI.yml"
      - "Dockerfile"
      - "dist/index.js"
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Run the Action
        id: run-action
        uses: matootie/github-docker@v2.2.2
        with:
          accessToken: ${{ secrets.GITHUB_TOKEN }}
          repositoryName: github-actions-for-packages
          imageName: tic-tac-toe
          imageTag: |
            latest
            anothertag
          buildArg: |
            THISISARG1=test
            THISISARG2=test
        if: always()            

      - name: Run the Action
        uses: matootie/github-docker@v2.2.2
        with:
          accessToken: ${{ secrets.GITHUB_TOKEN }}
          repositoryName: github-actions-for-packages/tic-tac-toe
          imageTag: |
            latest
            anothertag
          buildArg: |
            THISISARG1=test
            THISISARG2=test
        if: always()            

      - name: Run the Action
        uses: ./
        with:
          access_token: ${{ secrets.GITHUB_TOKEN }}
          repository: github-actions-for-packages
          tags: |
            latest
            anothertag
          build_arg: |
            THISISARG1=test
            THISISARG2=test
        if: always()            

      - name: Run the Action
        uses: ./
        with:
          access_token: ${{ secrets.GITHUB_TOKEN }}
          tags: latest
          image_name: CI
          build_arg: |
            THISISARG1=test
            THISISARG2=test
        if: always()            

      - uses: craftech-io/slack-action@v1
        with:
          slack_webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
        if: always()
